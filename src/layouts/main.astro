---
import '../styles/global.css';
import Header from './header.astro';
import Footer from './footer.astro';
import { siteConfig, getFullUrl, getImageUrl } from '../lib/config';

export interface Props {
	title?: string;
	description?: string;
	image?: string;
	canonicalURL?: string;
	type?: 'website' | 'article' | 'profile';
	author?: string;
	publishedTime?: string;
	modifiedTime?: string;
	section?: string;
	tags?: string[];
	noindex?: boolean;
	nofollow?: boolean;
}

const { 
	title = "Lit Phansiri - Full Stack Data Scientist",
	description = "Full Stack Data Scientist, Active Duty U.S. Marine, and UC Berkeley graduate specializing in cutting-edge Generative AI solutions",
	image = "/favicon.ico?v=2",
	canonicalURL = Astro.url,
	type = "website",
	author = "Lit Phansiri",
	publishedTime,
	modifiedTime,
	section,
	tags = [],
	noindex = false,
	nofollow = false
} = Astro.props;

const currentPath = Astro.url.pathname;
const siteURL = Astro.site || siteConfig.url;
const fullImageURL = new URL(image, siteURL).href;
const fullCanonicalURL = new URL(canonicalURL, siteURL).href;
---

<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico?v=2" />
		<link rel="shortcut icon" href="/favicon.ico?v=2" />
		<link rel="apple-touch-icon" href="/favicon.ico?v=2" />
		<link rel="icon" href="/favicon.ico?v=2" />
		<meta name="generator" content={Astro.generator} />
		
		<!-- Primary Meta Tags -->
		<title>{title}</title>
		<meta name="title" content={title} />
		<meta name="description" content={description} />
		
		<!-- Robots Meta -->
		<meta name="robots" content={`${noindex ? 'noindex' : 'index'}, ${nofollow ? 'nofollow' : 'follow'}`} />
		
		<!-- Author and Publisher -->
		<meta name="author" content={author} />
		<meta name="publisher" content="Lit Phansiri" />
		
		<!-- Language and Region -->
		<meta name="language" content="en-US" />
		<meta name="geo.region" content="US" />
		<meta name="geo.placename" content="United States" />
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={type} />
		<meta property="og:url" content={fullCanonicalURL} />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={fullImageURL} />
		<meta property="og:image:alt" content={`${title} - ${description}`} />
		<meta property="og:image:width" content="1200" />
		<meta property="og:image:height" content="630" />
		<meta property="og:site_name" content="Lit Phansiri Portfolio" />
		<meta property="og:locale" content="en_US" />
		{type === 'article' && publishedTime && <meta property="article:published_time" content={publishedTime} />}
		{type === 'article' && modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}
		{type === 'article' && author && <meta property="article:author" content={author} />}
		{type === 'article' && section && <meta property="article:section" content={section} />}
		{type === 'article' && tags.length > 0 && tags.map(tag => <meta property="article:tag" content={tag} />)}
		
		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@litphansiri" />
		<meta name="twitter:creator" content="@litphansiri" />
		<meta name="twitter:url" content={fullCanonicalURL} />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={fullImageURL} />
		<meta name="twitter:image:alt" content={`${title} - ${description}`} />
		
		<!-- Canonical URL -->
		<link rel="canonical" href={fullCanonicalURL} />
		
		<!-- Hreflang for internationalization -->
		<link rel="alternate" hreflang="en" href={fullCanonicalURL} />
		<link rel="alternate" hreflang="en-US" href={fullCanonicalURL} />
		<link rel="alternate" hreflang="x-default" href={fullCanonicalURL} />
		
		<!-- Additional SEO -->
		<meta name="keywords" content="data scientist, full stack developer, AI, machine learning, UC Berkeley, Marine Corps, blog, technology, computer systems, generative AI, neural networks, transformers" />
		<meta name="subject" content="Technology and AI/ML Blog" />
		<meta name="copyright" content="Lit Phansiri" />
		<meta name="reply-to" content="lit@phansiri.dev" />
		<meta name="owner" content="Lit Phansiri" />
		<meta name="url" content={fullCanonicalURL} />
		<meta name="identifier-URL" content={fullCanonicalURL} />
		<meta name="coverage" content="Worldwide" />
		<meta name="distribution" content="Global" />
		<meta name="rating" content="General" />
		<meta name="revisit-after" content="7 days" />
		
		<!-- RSS Feed -->
		<link rel="alternate" type="application/rss+xml" title="Lit Phansiri Blog RSS" href="/rss.xml" />
		
		<!-- Theme Color -->
		<meta name="theme-color" content="#ffffff" />
		<meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)" />
		
		<!-- Mobile App Meta -->
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="default" />
		<meta name="apple-mobile-web-app-title" content="Lit Phansiri" />
		
		<!-- Preconnect to external domains -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		
		<!-- DNS Prefetch for performance -->
		<link rel="dns-prefetch" href="//fonts.googleapis.com" />
		<link rel="dns-prefetch" href="//fonts.gstatic.com" />
		
		<!-- Geist Mono Font -->
		<link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600&display=swap" rel="stylesheet" />
		
		<!-- Preload critical resources -->
		<link rel="preload" href="/favicon.ico?v=2" as="image" type="image/x-icon" />
		
		<!-- Security Headers -->
		<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self'; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self';" />
		<meta http-equiv="X-Frame-Options" content="DENY" />
		<meta http-equiv="X-Content-Type-Options" content="nosniff" />
		<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
		<meta http-equiv="Permissions-Policy" content="camera=(), microphone=(), geolocation=(), interest-cohort=()" />
		
		<!-- Structured Data -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Person",
			"name": siteConfig.author.name,
			"url": siteConfig.url,
			"image": getImageUrl(siteConfig.author.image),
			"sameAs": [
				siteConfig.social.github,
				siteConfig.social.linkedin,
				"https://twitter.com/litphansiri"
			],
			"jobTitle": "Full Stack Data Scientist",
			"worksFor": {
				"@type": "Organization",
				"name": "United States Marine Corps"
			},
			"alumniOf": {
				"@type": "EducationalOrganization",
				"name": "University of California, Berkeley"
			},
			"knowsAbout": [
				"Artificial Intelligence",
				"Machine Learning",
				"Data Science",
				"Computer Systems",
				"Generative AI",
				"Neural Networks"
			],
			"description": "Full Stack Data Scientist, Active Duty U.S. Marine, and UC Berkeley graduate specializing in cutting-edge Generative AI solutions"
		})} />
		
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "WebSite",
			"name": siteConfig.name,
			"url": siteConfig.url,
			"description": siteConfig.description,
			"author": {
				"@type": "Person",
				"name": siteConfig.author.name
			},
			"publisher": {
				"@type": "Person",
				"name": siteConfig.author.name
			},
			"potentialAction": {
				"@type": "SearchAction",
				"target": getFullUrl("/blog?q={search_term_string}"),
				"query-input": "required name=search_term_string"
			}
		})} />
	</head>
	<body class="min-h-screen bg-background text-foreground">
		<a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-primary-foreground px-4 py-2 rounded-md z-50">
			Skip to main content
		</a>
		<Header title="Lit Phansiri" currentPath={currentPath} />
		<main id="main-content" role="main">
			<slot />
		</main>
		<Footer />
	</body>
</html>
